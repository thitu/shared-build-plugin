artifactory {
    contextUrl = CONTEXT_REPO_ROOT

    publish {
        repository {
            repoKey = currentBranch.call() == "release" ? "sdk-releases-local" : "sdk-snapshots-local"
            username = trusonaUsername
            password = trusonaPassword
            maven = true
        }
        defaults {
            publications("mavenJava")
            publishArtifacts = true
            publishPom = true
            publishIvy = false
        }
    }
    resolve {
        repository {
            repoKey = currentBranch.call() == "release" ? "sdk-releases-local" : "sdk-snapshots-local"
            username = trusonaUsername
            password = trusonaPassword
            maven = true
        }
    }
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }
}